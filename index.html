<!doctype html>
<html class="no-js" lang="en">
<!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="author" content="Chorus" />
  <script src="js/snap.svg-min.js"></script>
  <script>
  var s;
  var circleOffset = 20;
  var lineHeight = 16;
  
   window.onload = function () {
      
      s = Snap("#svg");
        
      var circle1 = createCircle(300, 300, 270);
      var circle2 = createCircle(300, 300, 180);
      var circle3 = createCircle(300, 300, 100);
      var circle4 = createCircle(300, 300, 20);
       
      addText(circle1, 'The quick brown fox jumps over the lazy dog The quick brown fox jumps over the lazy dog The quick brown fox jumps over the lazy dog The quick brown fox jumps over the lazy dog The quick brown fox jumps over the lazy dog The quick brown fox jumps over the lazy dog', circleOffset, 1);
      addText(circle2, "Donec sit amet ultricies neque. Nullam nec erat in dui mattis vehicula. Curabitur elementum at torto Donec sit amet ultricies neque. Donec sit amet ultricies neque. Nullam", circleOffset, 1);
      addText(circle3, "Donec sit amet ultricies neque. Nullam nec erat in dui mattis vehicula. Curabitur elementum at torto Donec sit amet ultricies neque. Donec sit amet ultricies neque. Nullam", circleOffset, 1);
           
      addText(circle1, "Donec sit amet ultricies neque. Nullam nec erat in dui mattis vehicula. Curabitu Donec sit amet ultricies neque.", circleOffset, 2);
      addText(circle2, "Donec sit amet ultricies neque. Nullam nec erat in dui mattis vehicula. Curabitu", circleOffset, 2);
      addText(circle3, "Donec sit amet ultricies neque. Nullam nec erat in dui mattis vehicula. Curabitu", circleOffset, 2);           
           
      addText(circle1, "Donec sit amet ultricies neque. Nullam nec erat in dui mattis vehicula. Curabitur elementum at torto Donec sit amet ultricies neque. torto Donec sit amet ultricies neque. Donec sit amet ultricies neque. Nullam", circleOffset, 3);
      addText(circle2, "Donec sit amet ultricies neque. Nullam nec erat in dui mattis vehicula. Curabitur elementum at torto Donec sit amet ultricies neque. Donec sit amet ultricies neque. Nullam", circleOffset, 3);
      addText(circle3, "Donec sit amet ultricies neque. Nullam nec erat in dui mattis vehicula. Curabitur elementum at torto Donec sit amet ultricies neque. Donec sit amet ultricies neque. Nullam", circleOffset, 3);
      
      addText(circle1, "Donec sit amet ultricies neque. Nullam nec erat in dui mattis vehicula. Curabitu", circleOffset, 4);
      addText(circle2, "Donec sit amet ultricies neque. Nullam nec erat in dui mattis vehicula. Nullam nec erat in dui mattis vehicula Curabitu", circleOffset, 4);
      addText(circle3, "Donec sit amet ultricies neque. Nullam nec erat in dui mattis vehicula. Curabitu", circleOffset, 4);
  }
    
    function createCircle(posX, posY, radius){
      var circle = s.circle(posX, posY, radius);
      styleCircle(circle);
      
      return circle;
    }
  
   function addText(circle, text, offSet, pos){
    var textRadius = circle.getBBox().r1 - offSet;
    
    var stringWidth = getStringLength(text).width;
    var subString = "";
    
    var sectionWidth = (textRadius * 2 * Math.PI) / 4;
    
    if(stringWidth > sectionWidth){
      subString = text.substring(80); 
      text = text.substring(0, 80); 
    }
   
    var angles = getStartAndEndAngles(pos);
    
    var startPoints = GetCircumferencePoints(textRadius, circle.getBBox().cx, circle.getBBox().cy, angles[0] + 5);
    var endPoints = GetCircumferencePoints(textRadius, circle.getBBox().cx, circle.getBBox().cy, angles[1] - 5);
    
    var startX = startPoints[0];
    var startY = startPoints[1];
    var endX =  endPoints[0];
    var endY = endPoints[1];
         
    var txtpth = s.path("M" + startX + "," + startY + " A" + textRadius + "," + textRadius + " 0 0, 1 " + endX + " " + endY).attr({
      "startOffset": "0",
      "fill": "none",
      "stroke": "none"
    });
    
    var textElement = s.text(0, 0, text).attr({
      "textAnchor": "start", 
      "textpath": txtpth, 
      "startOffset" : "0",
      "stroke": "none", 
      "strokeWidth": 0, 
      "fill": (pos == 1 || pos == 3) ? "red"  : "#000"
    });
    
    if(subString != ""){
      addText(circle, subString, offSet + lineHeight, pos);
    }
  }
  
  function getStringLength(string){
    var c=document.createElement('canvas');
    var ctx=c.getContext('2d');
    //ctx.font = fontsize + 'px' + fontname;
    return ctx.measureText(string);
  }
  
  function getStartAndEndAngles(pos){
    var angles; 
    
    switch(pos){
      case 1 :
        angles = [0, 90];
        break;
      case 2 :
        angles = [90, 180];
        break;
      case 3 :
        angles = [180, 270]
        break;
      case 4 :
        angles = [270, 0]
        break;
      default :
        angles = [0, 90];
     }
     
     return angles;
  }
  
  function GetCircumferencePoints(radius, originX, originY, angle){
    var x = originX + radius * Math.sin(angle * Math.PI / 180);
    
    var y = originY + radius * -Math.cos(angle * Math.PI / 180);
    
    return [x,y];
  }
  
  function styleCircle(circle){
    circle.attr({
      fill: "#fff",
      stroke: "#000",
     strokeWidth: 1
    });
  }
  </script>
</head>
<body style="font-family:arial; font-size:12px;">
<svg style="border:1px solid black;margin: 40px 0 0 300px;" id="svg" width="600" height="600"></svg>

</body>
</html>
 
 
